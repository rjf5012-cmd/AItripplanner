<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Printable Itinerary | AITripPlan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="Printable, shareable view of your AITripPlan itinerary. Includes day-by-day schedule, notes, and map-friendly activity list."
  />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="canonical" href="https://aitripplan.com/print.html" />

  <!-- Font (Inter) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="/styles.css" />
  <style>
    :root {
      --bg-page: #f3f4f6;
      --bg-card: #ffffff;
      --text-main: #0f172a;
      --text-soft: #4b5563;
      --text-muted: #6b7280;
      --accent: #2563eb;
      --border-subtle: rgba(209, 213, 219, 1);
      --radius-lg: 16px;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg-page);
      color: var(--text-main);
    }

    .page {
      max-width: 1024px;
      margin: 32px auto;
      padding: 0 16px 40px;
    }

    .print-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 20px;
    }

    .print-brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .print-logo-mark {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      box-shadow: 0 5px 14px rgba(15, 23, 42, 0.20);
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: white;
    }

    .print-logo-word {
      font-weight: 700;
      font-size: 18px;
      letter-spacing: -0.03em;
    }

    .print-logo-word span.accent {
      background: linear-gradient(135deg, #2563eb, #22c55e, #ec4899);
      -webkit-background-clip: text;
      color: transparent;
    }

    .print-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: flex-end;
    }

    .btn-print,
    .btn-back {
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      padding: 7px 12px;
      font-size: 12px;
      cursor: pointer;
      background: #f9fafb;
      color: var(--text-soft);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-print {
      border-color: #2563eb;
      background: #2563eb;
      color: #f9fafb;
    }

    .btn-print:hover {
      background: #1d4ed8;
      border-color: #1d4ed8;
    }

    .btn-back:hover {
      background: #eef2ff;
    }

    .print-meta {
      margin-bottom: 16px;
      font-size: 13px;
      color: var(--text-soft);
    }

    .print-meta strong {
      font-weight: 600;
    }

    .two-column {
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.1fr);
      gap: 16px;
      align-items: flex-start;
    }

    @media (max-width: 800px) {
      .two-column {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      padding: 14px 14px 12px;
      margin-bottom: 12px;
    }

    .card h2,
    .card h3 {
      margin: 0 0 6px;
      font-size: 16px;
    }

    .card h3 {
      font-size: 14px;
    }

    .card-sub {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .day-block {
      margin-bottom: 10px;
      padding-bottom: 8px;
      border-bottom: 1px dashed rgba(209, 213, 219, 1);
    }

    .day-block:last-of-type {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .day-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .day-sub {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .activity-line {
      font-size: 12px;
      color: var(--text-main);
      margin-bottom: 3px;
    }

    .activity-line span.label {
      font-weight: 600;
    }

    .activity-notes {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .list {
      font-size: 12px;
      color: var(--text-main);
      padding-left: 16px;
      margin: 4px 0 4px;
    }

    .list li {
      margin-bottom: 2px;
    }

    .print-footer-note {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 10px;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(209, 213, 219, 1);
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .pill.accent {
      border-color: rgba(37, 99, 235, 0.8);
      color: #1d4ed8;
      background: #eff6ff;
    }

    .divider {
      margin: 12px 0;
      border-top: 1px dashed rgba(209, 213, 219, 1);
    }

    .print-section-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .print-section-body {
      font-size: 12px;
      color: var(--text-soft);
      margin-bottom: 4px;
    }

    /* Hide buttons in actual printout */
    @media print {
      .print-actions {
        display: none;
      }
      .page {
        margin: 0;
        padding: 0 8px 16px;
        max-width: 100%;
      }
      body {
        background: #ffffff;
      }
      .card {
        box-shadow: none;
        border-radius: 0;
        border-left: none;
        border-right: none;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header class="print-header">
      <div class="print-brand">
        <div class="print-logo-mark" aria-hidden="true">
          <svg width="34" height="34" viewBox="0 0 34 34" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="printLogoGrad" x1="4" y1="4" x2="30" y2="30">
                <stop offset="0%" stop-color="#2563EB"/>
                <stop offset="50%" stop-color="#22C55E"/>
                <stop offset="100%" stop-color="#EC4899"/>
              </linearGradient>
            </defs>
            <circle cx="17" cy="17" r="17" fill="white"/>
            <circle cx="17" cy="17" r="14" fill="url(#printLogoGrad)"/>
            <path d="M17 8 L20.5 17 L17 26 L13.5 17 Z" fill="white" opacity="0.95"/>
            <circle cx="17" cy="17" r="3" fill="white"/>
          </svg>
        </div>
        <div class="print-logo-word">
          AITrip<span class="accent">Plan</span>
        </div>
      </div>
      <div class="print-actions">
        <button class="btn-back" type="button" onclick="window.location.href='/plan.html'">
          ‚Üê Back to planner
        </button>
        <button class="btn-print" type="button" onclick="window.print()">
          üñ®Ô∏è Print / Save as PDF
        </button>
      </div>
    </header>

    <div class="print-meta" id="metaSummary">
      Your itinerary will appear here once you export it from the planner.
    </div>

    <div class="two-column">
      <!-- Left: Day-by-day schedule -->
      <section id="daysColumn">
        <div class="card">
          <h2>Day-by-day schedule</h2>
          <div class="card-sub">
            Morning / afternoon / evening activities grouped by day. Great for a one-page overview.
          </div>
          <div id="daysContainer">
            <p class="print-section-body">
              No itinerary loaded yet. Go back to the planner, generate ideas, tweak the chips, and then use
              ‚ÄúOpen printable view‚Äù.
            </p>
          </div>
        </div>
      </section>

      <!-- Right: Lists / notes -->
      <section id="listsColumn">
        <div class="card" id="quickFactsCard">
          <h3>Trip snapshot</h3>
          <div class="card-sub">Destination, dates, and who‚Äôs going.</div>
          <div id="tripSnapshot">
            <p class="print-section-body">
              When you export from the planner, quick facts about your trip will show here.
            </p>
          </div>
        </div>

        <div class="card" id="placesCard">
          <h3>Places &amp; neighborhoods to remember</h3>
          <div class="card-sub">Good for dropping into Google Maps or sharing with your group.</div>
          <ul class="list" id="placesList">
            <li>No places yet. After you export, this will list neighborhoods and key spots from your activities.</li>
          </ul>
        </div>

        <div class="card" id="restaurantsCard">
          <h3>Food &amp; drink ideas</h3>
          <div class="card-sub">Use this as a starting list for restaurant and bar reservations.</div>
          <ul class="list" id="restaurantsList">
            <li>
              Any restaurant / bar mentions in your activities will be summarized here once you export from the planner.
            </li>
          </ul>
        </div>

        <div class="card" id="packingCard">
          <h3>Light packing checklist</h3>
          <div class="card-sub">Suggested basics based on your destination and trip style.</div>
          <ul class="list" id="packingList">
            <li>Comfortable walking shoes</li>
            <li>Weather-appropriate outerwear</li>
            <li>Day bag / small backpack</li>
            <li>Travel documents &amp; copies</li>
            <li>Portable charger &amp; adapters</li>
          </ul>
        </div>

        <div class="print-footer-note">
          Generated with AITripPlan.com. Always confirm opening hours, reservations, and local guidance before you go.
        </div>
      </section>
    </div>
  </div>

  <script>
    (function () {
      try {
        const raw = window.localStorage.getItem("aitripplan_export_v1");
        if (!raw) return;

        const payload = JSON.parse(raw);
        const meta = payload.meta || {};
        const suggestions = Array.isArray(payload.suggestions) ? payload.suggestions : [];

        const metaSummary = document.getElementById("metaSummary");
        const daysContainer = document.getElementById("daysContainer");
        const tripSnapshot = document.getElementById("tripSnapshot");
        const placesList = document.getElementById("placesList");
        const restaurantsList = document.getElementById("restaurantsList");

        if (!suggestions.length) return;

        // Meta summary
        const parts = [];
        if (meta.destination) parts.push(meta.destination);
        if (meta.days) parts.push(meta.days + " days");
        if (meta.dates) parts.push(meta.dates);
        if (meta.travelers) parts.push(meta.travelers);
        metaSummary.textContent = parts.join(" ‚Ä¢ ") || "Trip details";

        // Group by day
        const byDay = new Map();
        const flex = [];
        suggestions.forEach((s) => {
          const d = typeof s.dayHint === "number" && isFinite(s.dayHint) ? s.dayHint : null;
          if (d == null) {
            flex.push(s);
            return;
          }
          if (!byDay.has(d)) byDay.set(d, []);
          byDay.get(d).push(s);
        });

        const sortedDays = Array.from(byDay.keys()).sort((a, b) => a - b);

        const timeOrder = { morning: 0, afternoon: 1, evening: 2, flex: 3 };
        const formatTime = (t) => {
          const v = (t || "flex").toString().toLowerCase();
          if (v === "morning") return "Morning";
          if (v === "afternoon") return "Afternoon";
          if (v === "evening") return "Evening";
          return "Flexible";
        };

        const container = document.createElement("div");

        sortedDays.forEach((day) => {
          const block = document.createElement("section");
          block.className = "day-block";

          const title = document.createElement("div");
          title.className = "day-title";
          title.textContent = "Day " + day;
          block.appendChild(title);

          const sub = document.createElement("div");
          sub.className = "day-sub";
          sub.textContent = "Morning, afternoon, and evening ideas.";
          block.appendChild(sub);

          const items = (byDay.get(day) || []).slice().sort((a, b) => {
            const ta = (a.timeOfDay || "flex").toString().toLowerCase();
            const tb = (b.timeOfDay || "flex").toString().toLowerCase();
            const wa = Object.prototype.hasOwnProperty.call(timeOrder, ta) ? timeOrder[ta] : 4;
            const wb = Object.prototype.hasOwnProperty.call(timeOrder, tb) ? timeOrder[tb] : 4;
            return wa === wb
              ? (a.title || "").localeCompare(b.title || "")
              : wa - wb;
          });

          items.forEach((s) => {
            const line = document.createElement("div");
            line.className = "activity-line";

            const label = document.createElement("span");
            label.className = "label";
            label.textContent = formatTime(s.timeOfDay) + ": ";
            line.appendChild(label);

            line.append(s.title || "Activity");
            block.appendChild(line);

            if (s.description) {
              const notes = document.createElement("div");
              notes.className = "activity-notes";
              notes.textContent = s.description;
              block.appendChild(notes);
            }
          });

          container.appendChild(block);
        });

        if (flex.length) {
          const block = document.createElement("section");
          block.className = "day-block";

          const title = document.createElement("div");
          title.className = "day-title";
          title.textContent = "Any day ideas";
          block.appendChild(title);

          const sub = document.createElement("div");
          sub.className = "day-sub";
          sub.textContent = "Flexible activities you can plug into any day.";
          block.appendChild(sub);

          flex.forEach((s) => {
            const line = document.createElement("div");
            line.className = "activity-line";
            const label = document.createElement("span");
            label.className = "label";
            label.textContent = formatTime(s.timeOfDay) + ": ";
            line.appendChild(label);
            line.append(s.title || "Activity");
            block.appendChild(line);
          });

          container.appendChild(block);
        }

        daysContainer.innerHTML = "";
        daysContainer.appendChild(container);

        // Snapshot
        const snapshotParts = [];
        if (meta.destination) snapshotParts.push("Destination: " + meta.destination);
        if (meta.days) snapshotParts.push("Trip length: " + meta.days + " days");
        if (meta.dates) snapshotParts.push("Dates: " + meta.dates);
        if (meta.travelers) snapshotParts.push("Who‚Äôs going: " + meta.travelers);
        if (meta.tripType) snapshotParts.push("Trip type: " + meta.tripType);
        if (meta.budget) snapshotParts.push("Budget: " + meta.budget);
        if (meta.vibe) snapshotParts.push("Vibe: " + meta.vibe);

        if (snapshotParts.length) {
          const frag = document.createDocumentFragment();
          snapshotParts.forEach((p) => {
            const div = document.createElement("div");
            div.className = "activity-notes";
            div.textContent = p;
            frag.appendChild(div);
          });
          tripSnapshot.innerHTML = "";
          tripSnapshot.appendChild(frag);
        }

        // Places list (neighborhoods and map searches)
        const placesSet = new Set();
        suggestions.forEach((s) => {
          if (s.neighborhood) placesSet.add(String(s.neighborhood).trim());
          if (s.mapsSearch) placesSet.add(String(s.mapsSearch).trim());
        });

        if (placesSet.size) {
          placesList.innerHTML = "";
          Array.from(placesSet).forEach((name) => {
            const li = document.createElement("li");
            li.textContent = name;
            placesList.appendChild(li);
          });
        }

        // Restaurants list (heuristic: title or description mentioning "restaurant", "bar", "cafe")
        const restaurantSet = new Set();
        const reFood = /\b(restaurant|bar|caf√©|cafe|bistro|wine|tapas|pub)\b/i;
        suggestions.forEach((s) => {
          const check = [s.title || "", s.description || "", s.notes || ""].join(" ");
          if (reFood.test(check)) {
            const label = s.title || s.mapsSearch || s.neighborhood;
            if (label) restaurantSet.add(String(label).trim());
          }
        });

        if (restaurantSet.size) {
          restaurantsList.innerHTML = "";
          Array.from(restaurantSet).forEach((name) => {
            const li = document.createElement("li");
            li.textContent = name;
            restaurantsList.appendChild(li);
          });
        }
      } catch (e) {
        console.error("Failed to load printable itinerary:", e);
      }
    })();
  </script>
</body>
</html>
